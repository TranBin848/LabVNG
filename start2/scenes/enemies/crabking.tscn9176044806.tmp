[gd_scene load_steps=15 format=3 uid="uid://qkmhuuxevehh"]

[ext_resource type="Script" uid="uid://bfoteqorf1i5j" path="res://scenes/enemies/crabking.gd" id="1_felxo"]
[ext_resource type="Texture2D" uid="uid://div7bok06185o" path="res://assets/monsters/crab/crab_01.png" id="2_felxo"]
[ext_resource type="Texture2D" uid="uid://bheixrcxv5gb4" path="res://assets/monsters/crab/crab_hurt_01.png" id="2_r4weh"]
[ext_resource type="Texture2D" uid="uid://boxmc12qq7a8a" path="res://assets/monsters/crab/crab_hurt_02.png" id="3_dlw4t"]
[ext_resource type="Texture2D" uid="uid://d24uce3wqmwe6" path="res://assets/monsters/crab/crab_02.png" id="3_eb52o"]
[ext_resource type="Texture2D" uid="uid://dq122qahq1rm2" path="res://assets/monsters/crab/crab_03.png" id="4_sreu0"]
[ext_resource type="Script" uid="uid://dmyev2ork0vor" path="res://scenes/enemies/states/run.gd" id="5_pnh3p"]
[ext_resource type="Script" uid="uid://ba202nuh8h4cl" path="res://scripts/hit_area_2d.gd" id="6_eb52o"]
[ext_resource type="Script" uid="uid://due8of7dmgh87" path="res://scenes/enemies/mushroom/hurt.gd" id="6_pnh3p"]
[ext_resource type="Script" uid="uid://csu2b21cwchqw" path="res://scripts/hurt_area_2d.gd" id="7_sreu0"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_fwn1r"]
size = Vector2(16, 20)

[sub_resource type="SpriteFrames" id="SpriteFrames_r4weh"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_r4weh")
}, {
"duration": 1.0,
"texture": ExtResource("3_dlw4t")
}],
"loop": true,
"name": &"hurt",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_felxo")
}, {
"duration": 1.0,
"texture": ExtResource("3_eb52o")
}, {
"duration": 1.0,
"texture": ExtResource("4_sreu0")
}],
"loop": true,
"name": &"run",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_eb52o"]
size = Vector2(36, 23)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_pnh3p"]
size = Vector2(36.5, 23)

[node name="Crabking" type="CharacterBody2D"]
script = ExtResource("1_felxo")
metadata/_custom_type_script = "uid://s4xx82espxdt"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(-2, 3)
shape = SubResource("RectangleShape2D_fwn1r")

[node name="Direction" type="Node2D" parent="."]

[node name="FrontRayCast2D" type="RayCast2D" parent="Direction"]
position = Vector2(11, -4)
target_position = Vector2(14, 0)

[node name="DownRayCast2D" type="RayCast2D" parent="Direction"]
position = Vector2(8, 13)
target_position = Vector2(0, 8)

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="Direction"]
sprite_frames = SubResource("SpriteFrames_r4weh")
animation = &"hurt"
autoplay = "run"
frame_progress = 0.97011

[node name="States" type="Node" parent="."]

[node name="Run" type="Node" parent="States"]
script = ExtResource("5_pnh3p")

[node name="Hurt" type="Node" parent="States"]
script = ExtResource("6_pnh3p")

[node name="HitArea2D" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 4
script = ExtResource("6_eb52o")
metadata/_custom_type_script = "uid://ba202nuh8h4cl"

[node name="CollisionShape2D" type="CollisionShape2D" parent="HitArea2D"]
position = Vector2(-1, 1.5)
shape = SubResource("RectangleShape2D_eb52o")

[node name="HurtArea2D" type="Area2D" parent="."]
collision_layer = 4
collision_mask = 0
script = ExtResource("7_sreu0")
metadata/_custom_type_script = "uid://csu2b21cwchqw"

[node name="CollisionShape2D" type="CollisionShape2D" parent="HurtArea2D"]
position = Vector2(-1.25, 1.5)
shape = SubResource("RectangleShape2D_pnh3p")

[connection signal="hurt" from="HurtArea2D" to="." method="_on_hurt_area_2d_hurt"]
